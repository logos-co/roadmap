---
title: 2024-09-02 Waku Weekly
tags:
  - waku-updates
date: 2024-09-02
---

## [Milestone - Store Service Upgrade](https://github.com/waku-org/pm/milestone/28)

- [Store v3-beta - Message Hashes](https://github.com/waku-org/pm/issues/131)
  - achieved:
    - [research] Refined testing tools and query criteria for benchmark tests
  - next:
    - [research] run some more queries and discuss findings

- [Store v3 - store synchronisation](https://github.com/waku-org/pm/issues/132)
  - achieved:
    - [nwaku] Submitted PRs to enable store-sync in fleets: [store node enable store-sync protocol](https://github.com/status-im/infra-status/pull/43), [node enable store-sync protocol](https://github.com/status-im/infra-waku/pull/22)
  - next:
    - [research/nwaku] start store-sync dogfood

- [PostgreSQL Maintenance](https://github.com/waku-org/pm/issues/119)
  - achieved:
    - [research] executed more benchmark test scenarios
  - next:
    - [research] figure out why some test setups get bad response after 5s
    - [research] write test report

## [Milestone - Direct Message Reliability](https://github.com/waku-org/pm/milestone/29)

- [Tooling: filter and light push protocols](https://github.com/waku-org/pm/issues/178)
  - achieved:
    - [nwalu] Grafana dashboard is available for monitoring test performance and message delivery issues: chore: add dashboard for liteprotocoltester runs [chore: Added metrics to liteprotocoltester](https://github.com/waku-org/nwaku/pull/3002)

- [Reliability Protocol for Relay](https://github.com/waku-org/pm/issues/184)
  - achieved:
    - [nwaku] PR merged [chore: delivery monitor for store v3 reliability protocol](https://github.com/waku-org/nwaku/pull/2977)

- [Reliability Protocol for Resource-Restricted Clients](https://github.com/waku-org/pm/issues/186)
  - achieved:
    - [js-waku] implement missing messages monitor [feat(filter): reliability monitor as a separate class to handle reliability logic](https://github.com/waku-org/js-waku/pull/2117)
    - [js-waku] match RFC with having 2 peers used [chore: change amount of used peers to 2](https://github.com/waku-org/js-waku/pull/2111)
    - [js-waku] complete offline Filter recovery [feat: offline state recovery for Filter subscription](https://github.com/waku-org/js-waku/pull/2049)
    - [js-waku] improve peer selection [feat: sort peers for protocol by least active connections](https://github.com/waku-org/js-waku/pull/2089)
    - [js-waku] prioritize connected peers [chore: choose peers from the connected pool, instead of dialing unconnected peers](https://github.com/waku-org/js-waku/pull/2096)
  - next:
    - [js-waku] improve peer selection [feat: sort peers for protocol by least active connections](https://github.com/waku-org/js-waku/pull/2089)
    - [js-waku] prioritize connected peers [chore: choose peers from the connected pool, instead of dialing unconnected peers](https://github.com/waku-org/js-waku/pull/2096)

- [Review MVDS usage and fail path](https://github.com/waku-org/pm/issues/189)
  - achieved:
    - [chat] spec mvds usage in status [feat: status mvds usage](https://github.com/vacp2p/rfc-index/pull/87)

## [Milestone - End-to-end reliability protocol](https://github.com/waku-org/pm/milestone/30)

- [End-to-end reliability protocol - PoC](https://github.com/waku-org/pm/issues/193)
  - next:
    - [research]  incorporate better logging and other suggestions from dogfooding for POC

- [End-to-end reliability protocol - Status integration](https://github.com/waku-org/pm/issues/194)
  - achieved:
    - [research] research on status-go to assess suitable approach for API with e2e reliability
  - next:
    - [research] start documenting findings for Status API

## [Milestone - Static Sharding - dedicated shards](https://github.com/waku-org/pm/milestone/31)

- [Sharding peer management and discovery hardening](https://github.com/waku-org/pm/issues/172)
  - achieved:
    - [nwaku] Implemented most of the pubsub topic config deprecation [chore: deprecating pubsub topic](https://github.com/waku-org/nwaku/pull/2997)
    - [chat] shard aware peer store pruning [feat: shard aware pruning of peer store](https://github.com/waku-org/go-waku/pull/1193)
    - [chat] filter peer exchange peers served [feat: shard based filtering in peer exchange](https://github.com/waku-org/go-waku/pull/1194)
  - next:
    - [nwaku] finish and merge [chore: deprecating pubsub topic](https://github.com/waku-org/nwaku/pull/2997)

## [Milestone - Scale 1:1 chat messages PoC](https://github.com/waku-org/pm/milestone/34)

- [Maturing RLN variables/parameters revision](https://github.com/waku-org/pm/issues/205)
  - achieved:
    - [research] first version of implementation roadmap for RLN on mainnet [RLN on mainnet - Implementation Roadmap](https://github.com/waku-org/waku-rlnv2-contract/issues/11)
  - next:
    - [research] discuss implementation roadmap

- [Provision RLN for light push clients PoC](https://github.com/waku-org/pm/issues/206)
  - achieved:
    - [research] drafting forum post on service incentivization (WIP)
  - next:
    - [research] forum post work cont'd

## Other Work

### Enhancements

- achieved:
  - [nwaku] Prepared and validated release candidate for `v0.32.0`
  - [nwaku] Fixed bug importing Negentropy [fix: libnegentropy integration](https://github.com/waku-org/nwaku/pull/2996) which made fleet deployments fail
  - [nwaku] Started nwaku integration in status-go. The nwaku node can run from within the status-cli (very initial phase.)
  - [nwaku] Revisit nwaku for Windows 11 issue [feature: support Windows 11](https://github.com/waku-org/nwaku/issues/2473)
  - [nwaku] Utilized peer exchange (PX) tools to analyze optimal refresh rates for PX response health update PR [fix: peer-exchange issue](https://github.com/waku-org/nwaku/pull/2889)
  - [nwaku] litprotocoltester tool helped to discover duplicated messages problem
  - [nwaku] Issue reproduced with the latest release in local simulation with liteprotocoltester and waku-sim: [bug: duplicate messages on the network](https://github.com/waku-org/nwaku/issues/2998) logs are gathered and started to analyze
  - [nwaku] print WakuMessageHash as hex strings to make logs more readable [chore: print WakuMessageHash as hex strings](https://github.com/waku-org/nwaku/pull/2969)
  - [chat] create sender api for publishing messages and sent check [chore: refactor sender api](https://github.com/waku-org/go-waku/pull/1187)
  - [chat] remove satus.test fleet [chore_: remove status.test fleet](https://github.com/status-im/status-go/pull/5702)
  - [chat] refactor - use concrete datatypes instead of string [refactor_: use concrete datatypes instead of string](https://github.com/status-im/status-go/pull/5701)
  - [js-waku] improve devex by enabling insecure web sockets [chore: enable back filterAll if set by consumer](https://github.com/waku-org/js-waku/pull/2103)
  - [js-waku] move to Node.js LTS [chore: upgrade node to LTS 20](https://github.com/waku-org/js-waku/pull/2110)
  - [js-waku] return better error codes and improve error handling [feat(lightpush)!: return new error messages](https://github.com/waku-org/js-waku/pull/2115)
- next:
  - [nwaku] Perform the release
  - [nwaku] Carry on analyzing the logs to track the duplicate msg issues in light protocols.

### Bugs

- achieved:
  - [chat] fix flaky waku2 test [chore: fix TestBasicWakuV2](https://github.com/status-im/status-go/pull/5718)
  - [chat] fix use UTC time in logs [chore: use utc time in logs to avoid user location getting disclosed](https://github.com/waku-org/go-waku/pull/1192)
  - [js-waku] fix imports that were crushing the node [fix: import of base_protocol and networkConfig type guard](https://github.com/waku-org/js-waku/pull/2109)
